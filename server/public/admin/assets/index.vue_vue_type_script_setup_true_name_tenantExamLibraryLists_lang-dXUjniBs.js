import{B as ne,C as se,a1 as re,O as ie,P as de,h as ue,D as pe,I as me,K as _e,v as ce,d as fe,n as ye,o as ve,p as be,L as ge,M as we}from"./element-plus-BOMqSMu4.js";import{_ as xe}from"./index.vue_vue_type_script_setup_true_lang-Dl0F3zG-.js";import{_ as he}from"./index.vue_vue_type_script_setup_true_lang-uC_cZYzY.js";import{f as Ce,b as ke}from"./index-D26yx8rh.js";import{a as Ve}from"./vue-router-kfoHscKg.js";import{g as Ee}from"./exam_category-D_x0uykD.js";import{a as De,b as Le}from"./tenant_exam_library-BP0tXR3G.js";import{a as $e}from"./useDictOptions-Dk9jd2iD.js";import{u as Ue}from"./usePaging-CAPwGkdi.js";import{_ as Te}from"./edit.vue_vue_type_script_setup_true_name_tenantExamLibraryEdit_lang-DhRc7mnF.js";import{d as N,s as qe,r as P,Z as R,ag as Be,aq as Ie,o as s,c as g,V as e,M as l,u as o,U as V,aa as E,L as i,S as m,O as y,a as L,R as S,i as Pe,n as F}from"./@vue-DWQ9eUI2.js";const Re={class:"mt-4"},Se={class:"display-flex-start-center"},Fe={class:"flex mt-4 justify-end"},Ne=N({name:"tenantExamLibraryLists"}),Ye=N({...Ne,setup(Oe){const $=Ve(),w=qe(),x=P(!1),r=R({title:"",is_show:"",category_uid:"",author:"",free_state:"",year:"",hot_state:"",recommend_state:""}),U=R([]),D=P([]),O=n=>{D.value=n.map(({id:t})=>t)},M=n=>{r.category_uid=n[1]},j=n=>{$.push({path:"question",query:{library_uid:n.uid}})},A=n=>{$.push({path:"tenant_exam_chapter",query:{library_uid:n.uid}})},{dictData:c}=$e("show_status,price_typ,data_year,hot_state,recommend_state"),{pager:b,getLists:h,resetParams:K,resetPage:Q}=Ue({fetchFun:De,params:r}),Z=async()=>{var n;x.value=!0,await F(),(n=w.value)==null||n.open("add")},z=async n=>{var t,C;x.value=!0,await F(),(t=w.value)==null||t.open("edit"),(C=w.value)==null||C.setFormData(n)},T=async n=>{await Ce.confirm("确定要删除？"),await Le({id:n}),h()};return(async()=>{await Ee().then(n=>{Object.assign(U,n)})})(),h(),(n,t)=>{const C=ne,f=se,G=re,_=ie,k=de,u=ue,H=pe,q=me,J=ke,p=_e,W=ce,B=he,X=Be("arrow-down"),Y=fe,I=ye,ee=ve,te=be,ae=ge,le=xe,v=Ie("perms"),oe=we;return s(),g("div",null,[e(q,{class:"!border-none mb-4",shadow:"never","body-style":{padding:"10px"}},{default:l(()=>[e(H,{class:"",model:o(r),inline:""},{default:l(()=>[e(f,{label:"题库名称",prop:"title"},{default:l(()=>[e(C,{class:"w-[120px]",modelValue:o(r).title,"onUpdate:modelValue":t[0]||(t[0]=a=>o(r).title=a),clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(f,{label:"题库分类",prop:"category_uid"},{default:l(()=>[e(G,{modelValue:o(r).category_uid,"onUpdate:modelValue":t[1]||(t[1]=a=>o(r).category_uid=a),options:o(U),props:n.props,style:{width:"100%"},onChange:M},null,8,["modelValue","options","props"])]),_:1}),e(f,{label:"收费状态",prop:"free_state"},{default:l(()=>[e(k,{style:{width:"100px"},modelValue:o(r).free_state,"onUpdate:modelValue":t[2]||(t[2]=a=>o(r).free_state=a),clearable:"",placeholder:"请选择"},{default:l(()=>[e(_,{label:"全部",value:""}),(s(!0),g(V,null,E(o(c).price_typ,(a,d)=>(s(),i(_,{key:d,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"是否热门",prop:"hot_state"},{default:l(()=>[e(k,{style:{width:"100px"},modelValue:o(r).hot_state,"onUpdate:modelValue":t[3]||(t[3]=a=>o(r).hot_state=a),clearable:"",placeholder:"请选择"},{default:l(()=>[e(_,{label:"全部",value:""}),(s(!0),g(V,null,E(o(c).hot_state,(a,d)=>(s(),i(_,{key:d,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"是否推荐",prop:"recommend_state"},{default:l(()=>[e(k,{style:{width:"100px"},modelValue:o(r).recommend_state,"onUpdate:modelValue":t[4]||(t[4]=a=>o(r).recommend_state=a),clearable:"",placeholder:"请选择"},{default:l(()=>[e(_,{label:"全部",value:""}),(s(!0),g(V,null,E(o(c).recommend_state,(a,d)=>(s(),i(_,{key:d,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"收费状态",prop:"free_state"},{default:l(()=>[e(k,{style:{width:"100px"},modelValue:o(r).free_state,"onUpdate:modelValue":t[5]||(t[5]=a=>o(r).free_state=a),clearable:"",placeholder:"请选择"},{default:l(()=>[e(_,{label:"全部",value:""}),(s(!0),g(V,null,E(o(c).price_typ,(a,d)=>(s(),i(_,{key:d,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(u,{type:"primary",onClick:o(Q)},{default:l(()=>t[9]||(t[9]=[m("查询")])),_:1},8,["onClick"]),e(u,{onClick:o(K)},{default:l(()=>t[10]||(t[10]=[m("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),y((s(),i(q,{class:"!border-none",shadow:"never"},{default:l(()=>[y((s(),i(u,{type:"primary",onClick:Z},{icon:l(()=>[e(J,{name:"el-icon-Plus"})]),default:l(()=>[t[11]||(t[11]=m(" 新增 "))]),_:1})),[[v,["exam.tenant_exam_library/add"]]]),y((s(),i(u,{disabled:!o(D).length,onClick:t[6]||(t[6]=a=>T(o(D)))},{default:l(()=>t[12]||(t[12]=[m(" 删除 ")])),_:1},8,["disabled"])),[[v,["exam.tenant_exam_library/delete"]]]),L("div",Re,[e(ae,{data:o(b).lists,onSelectionChange:O},{default:l(()=>[e(p,{type:"selection",width:"55"}),e(p,{label:"题库编号",prop:"uid","show-overflow-tooltip":""}),e(p,{label:"题库分类",prop:"category.title"}),e(p,{label:"题库名称",prop:"title","show-overflow-tooltip":""}),e(p,{label:"题库封面",prop:"cover"},{default:l(({row:a})=>[a.image!==""?(s(),i(W,{key:0,style:{width:"50px",height:"50px"},src:a.image,"preview-src-list":[a.image],"preview-teleported":""},null,8,["src","preview-src-list"])):S("",!0)]),_:1}),e(p,{label:"收费状态",prop:"free_state"},{default:l(({row:a})=>[e(B,{options:o(c).price_typ,value:a.free_state},null,8,["options","value"])]),_:1}),e(p,{label:"显示状态",prop:"is_show"},{default:l(({row:a})=>[e(B,{options:o(c).show_status,value:a.is_show},null,8,["options","value"])]),_:1}),e(p,{label:"创建时间",prop:"create_time","show-overflow-tooltip":""}),e(p,{label:"操作",width:"180",fixed:"right"},{default:l(({row:a})=>[L("div",Se,[y((s(),i(u,{type:"primary",link:"",onClick:d=>z(a)},{default:l(()=>t[13]||(t[13]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["exam.tenant_exam_library/edit"]]]),y((s(),i(u,{type:"danger",class:"padding-right10",link:"",onClick:d=>T(a.id)},{default:l(()=>t[14]||(t[14]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[v,["exam.tenant_exam_library/delete"]]]),e(te,null,{dropdown:l(()=>[e(ee,null,{default:l(()=>[e(I,null,{default:l(()=>[y((s(),i(u,{type:"primary",link:"",onClick:d=>j(a)},{default:l(()=>t[16]||(t[16]=[m(" 题库 ")])),_:2},1032,["onClick"])),[[v,["exam.tenant_exam_question/lists"]]])]),_:2},1024),e(I,null,{default:l(()=>[y((s(),i(u,{type:"primary",link:"",onClick:d=>A(a)},{default:l(()=>t[17]||(t[17]=[m(" 章节 ")])),_:2},1032,["onClick"])),[[v,["exam.tenant_exam_chapter/lists"]]])]),_:2},1024)]),_:2},1024)]),default:l(()=>[e(u,{type:"warning",link:""},{default:l(()=>[t[15]||(t[15]=m("操作")),e(Y,{class:"el-icon--right"},{default:l(()=>[e(X)]),_:1})]),_:1})]),_:2},1024)])]),_:1})]),_:1},8,["data"])]),L("div",Fe,[e(le,{modelValue:o(b),"onUpdate:modelValue":t[7]||(t[7]=a=>Pe(b)?b.value=a:null),onChange:o(h)},null,8,["modelValue","onChange"])])]),_:1})),[[oe,o(b).loading]]),o(x)?(s(),i(Te,{key:0,ref_key:"editRef",ref:w,"dict-data":o(c),onSuccess:o(h),onClose:t[8]||(t[8]=a=>x.value=!1)},null,8,["dict-data","onSuccess"])):S("",!0)])}}});export{Ye as _};
