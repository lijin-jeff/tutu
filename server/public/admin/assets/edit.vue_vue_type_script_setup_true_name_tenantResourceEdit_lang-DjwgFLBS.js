import{a1 as M,C as Z,B as $,G as z,H as J,g as K,O as Q,P as W,D as X}from"./element-plus-BOMqSMu4.js";import{_ as Y}from"./index.vue_vue_type_style_index_0_lang-Bn866MxG.js";import{_ as ee}from"./picker-O3j_gyx7.js";import{P as le}from"./index-Bn47pySz.js";import{r as m}from"./index-D26yx8rh.js";import{a as te}from"./tenant_resource_category-3vHCcF4y.js";import{d as x,s as D,r as ae,Z as g,b as re,o as d,c,V as r,M as o,u as a,U as b,aa as y,L as V,S as oe,T as ue}from"./@vue-DWQ9eUI2.js";function we(s){return m.get({url:"/resource.tenant_resource/lists",params:s})}function se(s){return m.post({url:"/resource.tenant_resource/add",params:s})}function ne(s){return m.post({url:"/resource.tenant_resource/edit",params:s})}function ve(s){return m.post({url:"/resource.tenant_resource/delete",params:s})}function de(s){return m.get({url:"/resource.tenant_resource/detail",params:s})}const ie={class:"edit-popup"},me=x({name:"tenantResourceEdit"}),he=x({...me,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(s,{expose:T,emit:L}){const w=L,v=D(),_=D(),f=ae("add"),h=g([]),I=re(()=>f.value=="edit"?"编辑资源管理":"新增资源管理"),t=g({id:"",title:"",is_show:"",sort:"",image:"",remark:"",category_uid:"",author:"兔兔答题",free_state:"",money:"0.00",year:"",file_url:""}),B=g({title:[{required:!0,message:"请输入资源名称",trigger:["blur"]}],is_show:[{required:!0,message:"请选择上架装",trigger:["blur"]}],sort:[{required:!0,message:"请输入显示权重",trigger:["blur"]}],image:[{required:!0,message:"请输入资源封面",trigger:["blur"]}],remark:[{required:!0,message:"请输入资源描述",trigger:["blur"]}],category_uid:[{required:!0,message:"请输入资源分类",trigger:["blur"]}],author:[{required:!0,message:"请输入资源作者",trigger:["blur"]}],free_state:[{required:!0,message:"请选择付费状态",trigger:["blur"]}],file_url:[{required:!0,message:"请上传资源",trigger:["blur"]}],year:[{required:!0,message:"请选择资源年份",trigger:["blur"]}]}),F=u=>{t.category_uid=u[1]},k=async u=>{for(const e in t)u[e]!=null&&u[e]!=null&&(t[e]=u[e])},O=async u=>{const e=await de({id:u.id});k(e)},S=async()=>{var e,p;await((e=v.value)==null?void 0:e.validate());const u={...t};f.value=="edit"?await ne(u):await se(u),(p=_.value)==null||p.close(),w("success")},N=(u="add")=>{var e;f.value=u,(e=_.value)==null||e.open()},P=()=>{w("close")};return(async()=>{await te().then(u=>{Object.assign(h,u)})})(),T({open:N,setFormData:k,getDetail:O}),(u,e)=>{const p=M,n=Z,R=$,j=z,G=J,E=K,C=ee,U=Q,q=W,A=Y,H=X;return d(),c("div",ie,[r(le,{ref_key:"popupRef",ref:_,title:a(I),async:!0,width:"60%",onConfirm:S,onClose:P},{default:o(()=>[r(H,{ref_key:"formRef",ref:v,model:a(t),"label-width":"90px",rules:a(B)},{default:o(()=>[r(n,{label:"资源分类",prop:"category_uid"},{default:o(()=>[r(p,{modelValue:a(t).category_uid,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).category_uid=l),options:a(h),props:u.props,style:{width:"100%"},onChange:F},null,8,["modelValue","options","props"])]),_:1}),r(n,{label:"资源名称",prop:"title"},{default:o(()=>[r(R,{modelValue:a(t).title,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).title=l),clearable:"",placeholder:"请输入资源名称"},null,8,["modelValue"])]),_:1}),r(n,{label:"上架状态",prop:"is_show"},{default:o(()=>[r(G,{modelValue:a(t).is_show,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).is_show=l),placeholder:"请选择上架状态"},{default:o(()=>[(d(!0),c(b,null,y(s.dictData.show_status,(l,i)=>(d(),V(j,{key:i,label:parseInt(l.value)},{default:o(()=>[oe(ue(l.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"显示权重",prop:"sort"},{default:o(()=>[r(E,{min:0,step:1,style:{width:"100%"},modelValue:a(t).sort,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).sort=l),clearable:"",placeholder:"请输入显示权重"},null,8,["modelValue"])]),_:1}),r(n,{label:"资源封面",prop:"image"},{default:o(()=>[r(C,{modelValue:a(t).image,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).image=l)},null,8,["modelValue"])]),_:1}),r(n,{label:"资源附件",prop:"file_url"},{default:o(()=>[r(C,{modelValue:a(t).file_url,"onUpdate:modelValue":e[5]||(e[5]=l=>a(t).file_url=l),type:"file"},null,8,["modelValue"])]),_:1}),r(n,{label:"资源作者",prop:"author"},{default:o(()=>[r(R,{modelValue:a(t).author,"onUpdate:modelValue":e[6]||(e[6]=l=>a(t).author=l),clearable:"",placeholder:"请输入资源作者"},null,8,["modelValue"])]),_:1}),r(n,{label:"付费状态",prop:"free_state"},{default:o(()=>[r(q,{class:"flex-1",modelValue:a(t).free_state,"onUpdate:modelValue":e[7]||(e[7]=l=>a(t).free_state=l),clearable:"",placeholder:"请选择付费状态"},{default:o(()=>[(d(!0),c(b,null,y(s.dictData.price_typ,(l,i)=>(d(),V(U,{key:i,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"资源价格",prop:"money"},{default:o(()=>[r(E,{modelValue:a(t).money,"onUpdate:modelValue":e[8]||(e[8]=l=>a(t).money=l),min:0,step:.01,style:{width:"100%"},clearable:"",placeholder:"请输入资源价格"},null,8,["modelValue"])]),_:1}),r(n,{label:"资源年份",prop:"year"},{default:o(()=>[r(q,{class:"flex-1",modelValue:a(t).year,"onUpdate:modelValue":e[9]||(e[9]=l=>a(t).year=l),clearable:"",placeholder:"请选择资源年份"},{default:o(()=>[(d(!0),c(b,null,y(s.dictData.data_year,(l,i)=>(d(),V(U,{key:i,label:l.name,value:parseInt(l.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"资源描述",prop:"remark"},{default:o(()=>[r(A,{class:"flex-1",modelValue:a(t).remark,"onUpdate:modelValue":e[10]||(e[10]=l=>a(t).remark=l),height:500},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{he as _,we as a,ve as b};
