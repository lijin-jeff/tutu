import{a1 as Z,C as z,B as J,G as K,H as Q,g as W,O as X,P as Y,D as $}from"./element-plus-BOMqSMu4.js";import{_ as ee}from"./picker-O3j_gyx7.js";import{g as ae}from"./exam_category-D_x0uykD.js";import{c as le,d as te,e as oe}from"./tenant_exam_library-BP0tXR3G.js";import{P as re}from"./index-Bn47pySz.js";import{d as I,s as L,r as se,Z as w,b as ue,o as d,c as m,V as o,M as r,u as t,U as c,aa as _,L as f,S as E,T as h,a as R}from"./@vue-DWQ9eUI2.js";const de={class:"edit-popup"},ne={style:{width:"100%"}},me=I({name:"tenantExamLibraryEdit"}),ye=I({...me,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(i,{expose:T,emit:B}){const x=B,k=L(),g=L(),y=se("add"),U=w([]),F=ue(()=>y.value=="edit"?"编辑题库管理":"新增题库管理"),l=w({id:"",title:"",is_show:"",sort:"0",image:"",remark:"",category_uid:"",author:"",free_state:"",money:"",discount:"",year:"",recommend_state:0,hot_state:0}),N=w({title:[{required:!0,message:"请输入题库名称",trigger:["blur"]}],is_show:[{required:!0,message:"请选择题库显示状态",trigger:["blur"]}],sort:[{required:!0,message:"请输入题库显示权重",trigger:["blur"]}],category_uid:[{required:!0,message:"请选择题库分类",trigger:["blur"]}],author:[{required:!0,message:"请输入题库作者",trigger:["blur"]}],free_state:[{required:!0,message:"请选择收费状态",trigger:["blur"]}],year:[{required:!0,message:"请选择年份",trigger:["blur"]}],recommend_state:[{required:!0,message:"请选择是否推荐",trigger:["blur"]}],hot_state:[{required:!0,message:"请选择是否热门",trigger:["blur"]}]}),O=s=>{l.category_uid=s[1]},C=async s=>{for(const e in l)s[e]!=null&&s[e]!=null&&(l[e]=s[e])},S=async s=>{const e=await le({id:s.id});C(e)},P=async()=>{var e,b;await((e=k.value)==null?void 0:e.validate());const s={...l};y.value=="edit"?await te(s):await oe(s),(b=g.value)==null||b.close(),x("success")},j=(s="add")=>{var e;y.value=s,(e=g.value)==null||e.open()},G=()=>{x("close")};return(async()=>{await ae().then(s=>{Object.assign(U,s)})})(),T({open:j,setFormData:C,getDetail:S}),(s,e)=>{const b=Z,u=z,p=J,V=K,v=Q,A=W,H=ee,D=X,q=Y,M=$;return d(),m("div",de,[o(re,{ref_key:"popupRef",ref:g,title:t(F),async:!0,width:"600px",onConfirm:P,onClose:G},{default:r(()=>[o(M,{ref_key:"formRef",ref:k,model:t(l),"label-width":"90px",rules:t(N)},{default:r(()=>[o(u,{label:"题库分类",prop:"category_uid"},{default:r(()=>[o(b,{modelValue:t(l).category_uid,"onUpdate:modelValue":e[0]||(e[0]=a=>t(l).category_uid=a),options:t(U),props:s.props,style:{width:"100%"},onChange:O},null,8,["modelValue","options","props"])]),_:1}),o(u,{label:"题库名称",prop:"title"},{default:r(()=>[o(p,{modelValue:t(l).title,"onUpdate:modelValue":e[1]||(e[1]=a=>t(l).title=a),clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),o(u,{label:"启用状态",prop:"is_show"},{default:r(()=>[o(v,{modelValue:t(l).is_show,"onUpdate:modelValue":e[2]||(e[2]=a=>t(l).is_show=a),placeholder:"请选择"},{default:r(()=>[(d(!0),m(c,null,_(i.dictData.show_status,(a,n)=>(d(),f(V,{key:n,label:parseInt(a.value)},{default:r(()=>[E(h(a.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"是否推荐",prop:"recommend_state"},{default:r(()=>[o(v,{modelValue:t(l).recommend_state,"onUpdate:modelValue":e[3]||(e[3]=a=>t(l).recommend_state=a),placeholder:"请选择"},{default:r(()=>[(d(!0),m(c,null,_(i.dictData.recommend_state,(a,n)=>(d(),f(V,{key:n,label:parseInt(a.value)},{default:r(()=>[E(h(a.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"是否热门",prop:"hot_state"},{default:r(()=>[o(v,{modelValue:t(l).hot_state,"onUpdate:modelValue":e[4]||(e[4]=a=>t(l).hot_state=a),placeholder:"请选择"},{default:r(()=>[(d(!0),m(c,null,_(i.dictData.hot_state,(a,n)=>(d(),f(V,{key:n,label:parseInt(a.value)},{default:r(()=>[E(h(a.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"显示权重",prop:"sort"},{default:r(()=>[R("div",ne,[o(A,{modelValue:t(l).sort,"onUpdate:modelValue":e[5]||(e[5]=a=>t(l).sort=a),clearable:"",placeholder:"请输入",min:0,step:1,style:{width:"100%"}},null,8,["modelValue"]),e[13]||(e[13]=R("div",{class:"form-tips"},"默认为0， 只能为大于0的整数。值越大越排前显示。",-1))])]),_:1}),o(u,{label:"题库封面",prop:"image"},{default:r(()=>[o(H,{modelValue:t(l).image,"onUpdate:modelValue":e[6]||(e[6]=a=>t(l).image=a)},null,8,["modelValue"])]),_:1}),o(u,{label:"题库描述",prop:"remark"},{default:r(()=>[o(p,{class:"flex-1",modelValue:t(l).remark,"onUpdate:modelValue":e[7]||(e[7]=a=>t(l).remark=a),type:"textarea",rows:"4",clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),o(u,{label:"题库作者",prop:"author"},{default:r(()=>[o(p,{modelValue:t(l).author,"onUpdate:modelValue":e[8]||(e[8]=a=>t(l).author=a),clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),o(u,{label:"收费状态",prop:"free_state"},{default:r(()=>[o(q,{class:"flex-1",modelValue:t(l).free_state,"onUpdate:modelValue":e[9]||(e[9]=a=>t(l).free_state=a),clearable:"",placeholder:"请选择"},{default:r(()=>[(d(!0),m(c,null,_(i.dictData.price_typ,(a,n)=>(d(),f(D,{key:n,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"题库价格",prop:"money"},{default:r(()=>[o(p,{modelValue:t(l).money,"onUpdate:modelValue":e[10]||(e[10]=a=>t(l).money=a),clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),o(u,{label:"题库折扣",prop:"discount"},{default:r(()=>[o(p,{modelValue:t(l).discount,"onUpdate:modelValue":e[11]||(e[11]=a=>t(l).discount=a),clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),o(u,{label:"题库年份",prop:"year"},{default:r(()=>[o(q,{class:"flex-1",modelValue:t(l).year,"onUpdate:modelValue":e[12]||(e[12]=a=>t(l).year=a),clearable:"",placeholder:"请选择"},{default:r(()=>[(d(!0),m(c,null,_(i.dictData.data_year,(a,n)=>(d(),f(D,{key:n,label:a.name,value:parseInt(a.value)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{ye as _};
