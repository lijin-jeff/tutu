import{O as G,P as A,C as H,B as M,G as Z,H as z,g as J,D as K}from"./element-plus-BOMqSMu4.js";import{a as Q,b as W,c as X,d as Y}from"./tenant_exam_chapter-BMC_APIL.js";import{P as $}from"./index-Bn47pySz.js";import{u as ee}from"./vue-router-kfoHscKg.js";import{d as V,s as w,r as te,Z as m,b as ae,o as n,c,V as s,M as r,u as o,U as E,aa as g,L as v,S as le,T as oe}from"./@vue-DWQ9eUI2.js";const se={class:"edit-popup"},re=V({name:"tenantExamChapterEdit"}),me=V({...re,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(x,{expose:C,emit:R}){const _=R,f=w(),d=w(),p=te("add"),b=m([]),y=ee(),k=ae(()=>p.value=="edit"?"编辑题库章节":"新增题库章节"),l=m({id:"",title:"",is_show:"",sort:"",parent_uid:"",tenant_exam_library_uid:y.query.library_uid}),D=m({title:[{required:!0,message:"请输入章节名称",trigger:["blur"]}],is_show:[{required:!0,message:"请选择显示状态",trigger:["blur"]}],sort:[{required:!0,message:"请输入显示权重",trigger:["blur"]}]}),h=async a=>{for(const e in l)a[e]!=null&&a[e]!=null&&(l[e]=a[e])},T=async a=>{const e=await Q({id:a.id});h(e)},q=async()=>{var e,u;await((e=f.value)==null?void 0:e.validate());const a={...l};p.value=="edit"?await W(a):await X(a),(u=d.value)==null||u.close(),_("success")},P=(a="add")=>{var e;p.value=a,(e=d.value)==null||e.open()},U=async()=>{await Y({tenant_exam_library_uid:y.query.library_uid}).then(a=>{Object.assign(b,a)})},B=()=>{_("close")};return U(),C({open:P,setFormData:h,getDetail:T}),(a,e)=>{const u=G,F=A,i=H,I=M,L=Z,O=z,S=J,N=K;return n(),c("div",se,[s($,{ref_key:"popupRef",ref:d,title:o(k),async:!0,width:"550px",onConfirm:q,onClose:B},{default:r(()=>[s(N,{ref_key:"formRef",ref:f,model:o(l),"label-width":"90px",rules:o(D)},{default:r(()=>[s(i,{label:"上级分类",prop:"parent_uid"},{default:r(()=>[s(F,{modelValue:o(l).parent_uid,"onUpdate:modelValue":e[0]||(e[0]=t=>o(l).parent_uid=t),clearable:"",placeholder:"请选择上级分类"},{default:r(()=>[(n(!0),c(E,null,g(o(b),t=>(n(),v(u,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(i,{label:"章节名称",prop:"title"},{default:r(()=>[s(I,{modelValue:o(l).title,"onUpdate:modelValue":e[1]||(e[1]=t=>o(l).title=t),clearable:"",placeholder:"请输入章节名称"},null,8,["modelValue"])]),_:1}),s(i,{label:"显示状态",prop:"is_show"},{default:r(()=>[s(O,{modelValue:o(l).is_show,"onUpdate:modelValue":e[2]||(e[2]=t=>o(l).is_show=t),placeholder:"请选择显示状态"},{default:r(()=>[(n(!0),c(E,null,g(x.dictData.show_status,(t,j)=>(n(),v(L,{key:j,label:parseInt(t.value)},{default:r(()=>[le(oe(t.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(i,{label:"显示权重",prop:"sort"},{default:r(()=>[s(S,{min:0,step:1,modelValue:o(l).sort,"onUpdate:modelValue":e[3]||(e[3]=t=>o(l).sort=t),clearable:"",placeholder:"请输入显示权重",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{me as _};
