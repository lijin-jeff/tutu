import{a1 as Q,C as j,g as G,H as S,h as $,D as z,G as H}from"./element-plus-BOMqSMu4.js";import{_ as J}from"./index.vue_vue_type_style_index_0_lang-Bn866MxG.js";import{_ as M}from"./index.vue_vue_type_style_index_0_lang-BHe48Qr2.js";import{g as Z}from"./tenant_exam_chapter-BMC_APIL.js";import{a as K}from"./useDictOptions-Dk9jd2iD.js";import{E as C}from"./index-CJYi2pTy.js";import{b as P,c as W,d as X}from"./tenant_exam_question-B2Ksr1j0.js";import{d as Y,Z as h,s as ee,w as te,o as i,c,V as s,M as r,u as a,a as u,U as b,aa as v,S as _,L as w,T as U}from"./@vue-DWQ9eUI2.js";const le={style:{width:"100%"}},ae={style:{width:"100%"}},se={class:"padding-right20 display-flex-start-center"},oe={class:"display-flex-start-center"},fe=Y({__name:"JudeOption",props:{id:{},libraryUid:{}},emits:["success"],setup(D,{emit:T}){const q=T,m=D,l=h({id:m.id||0,chapterUid:"",libraryUid:"",tenant_exam_library_uid:m.libraryUid,title:"",score:1,analysis:"",is_show:1,sort:0,level:1,selectAnswer:"",exam_type:3,answer:[],option:[{check:C.A,title:"正确",is_check:!1},{check:C.B,title:"错误",is_check:!1}]}),{dictData:y}=K("show_status,level"),V=h([]),x=ee(),A=h({title:[{required:!0,message:"请输入试题题干",trigger:["blur"]}],is_show:[{required:!0,message:"请选择试题显示状态",trigger:["blur"]}],sort:[{required:!0,message:"请输入试题显示权重",trigger:["blur"]}],score:[{required:!0,message:"请输入试题积分",trigger:["blur"]},{type:"number",message:"请输入大于0的整数",min:0}],answer:[{required:!0,message:"请选勾选题答案",trigger:["blur"]},{validator:(o,e,d)=>{e.length<1?d(new Error("请选勾选题答案")):d()},trigger:["blur","change"]}],level:[{required:!0,message:"请勾选试题难度",trigger:["blur"]}]});te(()=>m.id,(o,e)=>{console.log("新值:",o),console.log("旧值:",e),o!==e&&F()});const B=o=>{l.chapter_uid=o[1]},I=async()=>{var e;console.log("saveForm",l);const o={...l};await((e=x.value)==null?void 0:e.validate(d=>{d?(l.uid?P(o):W(o),q("success",o)):console.log("error submit!!",o)}))},R=o=>{l.answer=[o]},F=async()=>{const o=await X({id:m.id});Object.assign(l,o),l.selectAnswer=o.answer.join("")};return(async()=>{Z({tenant_exam_library_uid:l.tenant_exam_library_uid}).then(o=>{Object.assign(V,o)})})(),(o,e)=>{const d=Q,n=j,L=M,k=G,f=H,g=S,N=J,E=$,O=z;return i(),c("div",null,[s(O,{"label-width":"100px",model:a(l),ref_key:"formRef",ref:x,rules:a(A)},{default:r(()=>[s(n,{label:"试题章节",prop:"chapter_uid"},{default:r(()=>[s(d,{modelValue:a(l).chapter_uid,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).chapter_uid=t),options:a(V),props:m,style:{width:"100%"},onChange:B},null,8,["modelValue","options","props"])]),_:1}),s(n,{label:"试题题干",prop:"title"},{default:r(()=>[s(L,{modelValue:a(l).title,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).title=t),height:150,width:"100%"},null,8,["modelValue"])]),_:1}),s(n,{label:"显示权重",prop:"sort"},{default:r(()=>[u("div",le,[s(k,{min:0,step:1,modelValue:a(l).sort,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).sort=t),style:{width:"100%"},clearable:"",placeholder:"请输入"},null,8,["modelValue"]),e[8]||(e[8]=u("div",{class:"form-tips"},"默认为0， 只能为大于0的整数。值越大越排前显示。",-1))])]),_:1}),s(n,{label:"试题积分",prop:"score"},{default:r(()=>[u("div",ae,[s(k,{min:1,step:.01,style:{width:"100%"},modelValue:a(l).score,"onUpdate:modelValue":e[3]||(e[3]=t=>a(l).score=t),clearable:"",placeholder:"请输入"},null,8,["modelValue"]),e[9]||(e[9]=u("div",{class:"form-tips"},"默认为0， 只能为大于0的整数。值越大越排前显示。",-1))])]),_:1}),s(n,{label:"启用状态",prop:"is_show"},{default:r(()=>[s(g,{modelValue:a(l).is_show,"onUpdate:modelValue":e[4]||(e[4]=t=>a(l).is_show=t),placeholder:"请选择"},{default:r(()=>[(i(!0),c(b,null,v(a(y).show_status,(t,p)=>(i(),w(f,{key:p,value:parseInt(t.value),label:parseInt(t.value)},{default:r(()=>[_(U(t.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(n,{label:"试题难度",prop:"level"},{default:r(()=>[s(g,{modelValue:a(l).level,"onUpdate:modelValue":e[5]||(e[5]=t=>a(l).level=t),placeholder:"请选择试题难度"},{default:r(()=>[(i(!0),c(b,null,v(a(y).level,(t,p)=>(i(),w(f,{key:p,value:parseInt(t.value),label:parseInt(t.value)},{default:r(()=>[_(U(t.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(n,{label:"试题解析",prop:"analysis"},{default:r(()=>[s(N,{modelValue:a(l).analysis,"onUpdate:modelValue":e[6]||(e[6]=t=>a(l).analysis=t),height:150,width:"100%"},null,8,["modelValue"])]),_:1}),s(n,{label:"试题答案"},{default:r(()=>[s(g,{onChange:R,modelValue:a(l).selectAnswer,"onUpdate:modelValue":e[7]||(e[7]=t=>a(l).selectAnswer=t)},{default:r(()=>[u("div",se,[(i(!0),c(b,null,v(a(l).option,(t,p)=>(i(),w(f,{key:t.check+p,value:t.check,label:t.title,size:"large",name:"option_check"},null,8,["value","label"]))),128))])]),_:1},8,["modelValue"])]),_:1}),u("div",oe,[s(E,{type:"primary",onClick:I},{default:r(()=>e[10]||(e[10]=[_("保存试题")])),_:1}),s(E,{type:"warning"},{default:r(()=>e[11]||(e[11]=[_("重置数据")])),_:1})])]),_:1},8,["model","rules"])])}}});export{fe as _};
