import{a1 as K,C as S,g as z,H,h as M,D as P,G as Z}from"./element-plus-BOMqSMu4.js";import{_ as J}from"./index.vue_vue_type_style_index_0_lang-Bn866MxG.js";import{_ as W}from"./index.vue_vue_type_style_index_0_lang-BHe48Qr2.js";import{g as X}from"./tenant_exam_chapter-BMC_APIL.js";import{b as Y,c as ee,d as te}from"./tenant_exam_question-B2Ksr1j0.js";import{a as le}from"./useDictOptions-Dk9jd2iD.js";import{E as v}from"./index-CJYi2pTy.js";import{u as oe}from"./vue-router-kfoHscKg.js";import{d as se,s as ae,Z as y,w as ne,a4 as ie,o as p,c as _,V as a,M as n,u as s,a as r,U as w,aa as k,S as c,L as N,T as D}from"./@vue-DWQ9eUI2.js";const re={style:{width:"100%"}},de={style:{width:"100%"}},ue={class:"",style:{width:"100%"}},pe={class:"padding-right20 display-flex-start-center"},ce={class:"padding-right20"},me={class:"display-flex-start-center"},_e={class:"margin-top10"},fe={class:"display-flex-start-center"},Ee=se({__name:"RadioOption",props:{id:{},libraryUid:{}},emits:["success"],setup(O,{emit:A}){const R=A;oe();const m=O,V=ae(),t=y({id:m.id||0,chapter_uid:"",title:"",score:1,analysis:"",is_show:1,sort:0,selectAnswer:"",answer:[],exam_type:1,level:1,tenant_exam_library_uid:m.libraryUid,option:[{check:v.A,title:"请输入选项值",is_check:!1}]}),x=y([]),{dictData:C}=le("show_status,level"),I=y({title:[{required:!0,message:"请输入试题题干",trigger:["blur"]}],is_show:[{required:!0,message:"请选择试题显示状态",trigger:["blur"]}],sort:[{required:!0,message:"请输入试题显示权重",trigger:["blur"]}],score:[{required:!0,message:"请输入试题积分",trigger:["blur"]},{type:"number",message:"请输入大于0的整数",min:0}],answer:[{required:!0,message:"请选勾选题答案",trigger:["blur"]}],level:[{required:!0,message:"请勾选试题难度",trigger:["blur"]}]});ne(()=>m.id,(o,e)=>{console.log("新值:",o),console.log("旧值:",e),o!==e&&Q()}),ie(()=>{console.log("onActivated")});const T=async()=>{var e;const o={...t};await((e=V.value)==null?void 0:e.validate(i=>{i?(t.id?Y(o):ee(o),R("success",o)):console.log("error submit!!",o)}))},q=o=>{t.chapter_uid=o[1]},j=()=>{const o=Object.keys(v).filter(i=>isNaN(Number(i))),e=t.option.length;o[e]!==void 0&&t.option.push({check:o[e],title:"请输入选项值",is_check:!1})},B=o=>{t.option.splice(o,1),F()},L=o=>{t.answer=[o]},F=()=>{const o=Object.keys(v).filter(i=>isNaN(Number(i))),e=[];for(let i=0;i<t.option.length;i++)e.push({title:t.option[i].title,check:o[i],is_check:t.option[i].is_check});t.option=e},Q=async()=>{const o=await te({id:m.id});Object.assign(t,o),t.selectAnswer=o.answer.join("")};return(async()=>{X({tenant_exam_library_uid:t.tenant_exam_library_uid}).then(o=>{Object.assign(x,o)})})(),(o,e)=>{const i=K,d=S,E=W,U=z,g=Z,b=H,$=J,f=M,G=P;return p(),_("div",null,[a(G,{"label-width":"100px",rules:s(I),ref_key:"formRef",ref:V,model:s(t)},{default:n(()=>[a(d,{label:"试题章节",prop:"chapter_uid"},{default:n(()=>[a(i,{modelValue:s(t).chapter_uid,"onUpdate:modelValue":e[0]||(e[0]=l=>s(t).chapter_uid=l),options:s(x),props:m,style:{width:"100%"},onChange:q},null,8,["modelValue","options","props"])]),_:1}),a(d,{label:"试题题干",prop:"title"},{default:n(()=>[a(E,{modelValue:s(t).title,"onUpdate:modelValue":e[1]||(e[1]=l=>s(t).title=l),height:150,width:"100%"},null,8,["modelValue"])]),_:1}),a(d,{label:"显示权重",prop:"sort"},{default:n(()=>[r("div",re,[a(U,{min:0,step:1,modelValue:s(t).sort,"onUpdate:modelValue":e[2]||(e[2]=l=>s(t).sort=l),style:{width:"100%"},clearable:"",placeholder:"请输入"},null,8,["modelValue"]),e[8]||(e[8]=r("div",{class:"form-tips"},"默认为0， 只能为大于0的整数。值越大越排前显示。",-1))])]),_:1}),a(d,{label:"试题积分",prop:"score"},{default:n(()=>[r("div",de,[a(U,{min:1,step:.01,style:{width:"100%"},modelValue:s(t).score,"onUpdate:modelValue":e[3]||(e[3]=l=>s(t).score=l),clearable:"",placeholder:"请输入"},null,8,["modelValue"]),e[9]||(e[9]=r("div",{class:"form-tips"},"默认为0， 只能为大于0的整数。值越大越排前显示。",-1))])]),_:1}),a(d,{label:"启用状态",prop:"is_show"},{default:n(()=>[a(b,{modelValue:s(t).is_show,"onUpdate:modelValue":e[4]||(e[4]=l=>s(t).is_show=l),placeholder:"请选择"},{default:n(()=>[(p(!0),_(w,null,k(s(C).show_status,(l,u)=>(p(),N(g,{key:u,value:parseInt(l.value),label:parseInt(l.value)},{default:n(()=>[c(D(l.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"试题难度",prop:"level"},{default:n(()=>[a(b,{modelValue:s(t).level,"onUpdate:modelValue":e[5]||(e[5]=l=>s(t).level=l),placeholder:"请选择试题难度"},{default:n(()=>[(p(!0),_(w,null,k(s(C).level,(l,u)=>(p(),N(g,{key:u,value:parseInt(l.value),label:parseInt(l.value)},{default:n(()=>[c(D(l.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"试题解析",prop:"analysis"},{default:n(()=>[a($,{modelValue:s(t).analysis,"onUpdate:modelValue":e[6]||(e[6]=l=>s(t).analysis=l),height:150,width:"100%"},null,8,["modelValue"])]),_:1}),a(d,{label:"答案选项",prop:"answer"},{default:n(()=>[(p(!0),_(w,null,k(s(t).option,(l,u)=>(p(),_("div",{key:l.check,class:"with100"},[r("div",null,[a(b,{onChange:L,modelValue:s(t).selectAnswer,"onUpdate:modelValue":e[7]||(e[7]=h=>s(t).selectAnswer=h)},{default:n(()=>[r("div",ue,[r("div",pe,[r("div",ce,[a(g,{value:l.check,label:"选项"+l.check,size:"large",checked:l.is_check,name:"option_check"},null,8,["value","label","checked"])]),r("div",me,[a(f,{type:"success",icon:"Plus",link:"",onClick:j},{default:n(()=>e[10]||(e[10]=[c("添加选项 ")])),_:1}),a(f,{type:"danger",icon:"Delete",link:"",onClick:h=>B(u)},{default:n(()=>e[11]||(e[11]=[c("删除选项 ")])),_:2},1032,["onClick"])])])])]),_:2},1032,["modelValue"])]),r("div",_e,[a(E,{modelValue:s(t).option[u].title,"onUpdate:modelValue":h=>s(t).option[u].title=h,height:150,width:"100%"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),_:1}),r("div",fe,[a(f,{type:"primary",onClick:T},{default:n(()=>e[12]||(e[12]=[c("保存试题")])),_:1}),a(f,{type:"warning"},{default:n(()=>e[13]||(e[13]=[c("重置数据")])),_:1})])]),_:1},8,["rules","model"])])}}});export{Ee as _};
