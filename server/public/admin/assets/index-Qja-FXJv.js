import{B as Q,C as W,a1 as X,O as Y,P as ee,h as te,D as oe,I as le,K as ae,v as re,L as se,M as ne}from"./element-plus-BOMqSMu4.js";import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang-Dl0F3zG-.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang-uC_cZYzY.js";import{f as ue,b as de}from"./index-D26yx8rh.js";import{u as me}from"./usePaging-CAPwGkdi.js";import{a as ce}from"./useDictOptions-Dk9jd2iD.js";import{_ as _e,a as fe,b as ve}from"./edit.vue_vue_type_script_setup_true_name_tenantResourceEdit_lang-DjwgFLBS.js";import{a as be}from"./tenant_resource_category-3vHCcF4y.js";import{d as F,s as we,r as $,Z as B,aq as ye,o as i,c as V,V as e,M as a,u as l,U as D,aa as L,L as p,S as f,O as w,a as P,i as ge,R as he,n as S}from"./@vue-DWQ9eUI2.js";import"./lodash-es-ConpBW6D.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-t6vcCXyq.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-kfoHscKg.js";import"./pinia-xIQONLba.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-BGJqEudt.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-BEPSbOJo.js";import"./@highlightjs-DFNU4Zg1.js";import"./index.vue_vue_type_style_index_0_lang-Bn866MxG.js";import"./@wangeditor-CpBL_vJJ.js";import"./picker-O3j_gyx7.js";import"./index-Bn47pySz.js";import"./index-B5Tv3py5.js";import"./index-CUctT6tT.js";import"./index-VlRnd21E.js";import"./index.vue_vue_type_script_setup_true_lang-B5Pc4JQX.js";import"./vue3-video-play-BBayeKOM.js";import"./vuedraggable-BDQ0t2m8.js";import"./vue-CvVLHxBQ.js";import"./sortablejs-DdgKbxid.js";const Ce={class:"mt-4"},Ve={class:"flex mt-4 justify-end"},ke=F({name:"tenantResourceLists"}),Ct=F({...ke,setup(xe){const y=we(),g=$(!1),R=B([]),r=B({title:"",is_show:"",category_uid:"",author:"",free_state:"",year:""}),k=$([]),I=s=>{r.category_uid=s[1]},N=s=>{k.value=s.map(({id:t})=>t)},{dictData:u}=ce("show_status,price_typ,data_year"),{pager:v,getLists:h,resetParams:O,resetPage:j}=me({fetchFun:fe,params:r}),q=async()=>{var s;g.value=!0,await S(),(s=y.value)==null||s.open("add")},M=async s=>{var t,b;g.value=!0,await S(),(t=y.value)==null||t.open("edit"),(b=y.value)==null||b.setFormData(s)};(async()=>{await be().then(s=>{Object.assign(R,s)})})();const T=async s=>{await ue.confirm("确定要删除？"),await ve({id:s}),h()};return h(),(s,t)=>{const b=Q,d=W,A=X,c=Y,x=ee,_=te,K=oe,U=le,Z=de,n=ae,E=pe,z=re,G=se,H=ie,C=ye("perms"),J=ne;return i(),V("div",null,[e(U,{class:"!border-none mb-4",shadow:"never"},{default:a(()=>[e(K,{class:"mb-[-16px]",model:l(r),inline:""},{default:a(()=>[e(d,{label:"资源名称",prop:"title"},{default:a(()=>[e(b,{class:"w-[280px]",modelValue:l(r).title,"onUpdate:modelValue":t[0]||(t[0]=o=>l(r).title=o),clearable:"",placeholder:"请输入资源名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"资源作者",prop:"author"},{default:a(()=>[e(b,{class:"w-[280px]",modelValue:l(r).author,"onUpdate:modelValue":t[1]||(t[1]=o=>l(r).author=o),clearable:"",placeholder:"请输入资源作者"},null,8,["modelValue"])]),_:1}),e(d,{label:"资源分类",prop:"category_uid"},{default:a(()=>[e(A,{modelValue:l(r).category_uid,"onUpdate:modelValue":t[2]||(t[2]=o=>l(r).category_uid=o),options:l(R),props:s.props,style:{width:"100%"},onChange:I},null,8,["modelValue","options","props"])]),_:1}),e(d,{label:"上架状态",prop:"is_show"},{default:a(()=>[e(x,{class:"w-[280px]",style:{width:"200px"},modelValue:l(r).is_show,"onUpdate:modelValue":t[3]||(t[3]=o=>l(r).is_show=o),clearable:"",placeholder:"请选择上架装"},{default:a(()=>[e(c,{label:"全部",value:""}),(i(!0),V(D,null,L(l(u).show_status,(o,m)=>(i(),p(c,{key:m,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"付费状态",prop:"free_state"},{default:a(()=>[e(x,{class:"w-[280px]",style:{width:"200px"},modelValue:l(r).free_state,"onUpdate:modelValue":t[4]||(t[4]=o=>l(r).free_state=o),clearable:"",placeholder:"请选择付费状态"},{default:a(()=>[e(c,{label:"全部",value:""}),(i(!0),V(D,null,L(l(u).price_typ,(o,m)=>(i(),p(c,{key:m,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"资源年份",prop:"year"},{default:a(()=>[e(x,{class:"w-[280px]",style:{width:"200px"},modelValue:l(r).year,"onUpdate:modelValue":t[5]||(t[5]=o=>l(r).year=o),clearable:"",placeholder:"请选择资源年份"},{default:a(()=>[e(c,{label:"全部",value:""}),(i(!0),V(D,null,L(l(u).data_year,(o,m)=>(i(),p(c,{key:m,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(_,{type:"primary",onClick:l(j)},{default:a(()=>t[9]||(t[9]=[f("查询")])),_:1},8,["onClick"]),e(_,{onClick:l(O)},{default:a(()=>t[10]||(t[10]=[f("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),w((i(),p(U,{class:"!border-none",shadow:"never"},{default:a(()=>[w((i(),p(_,{type:"primary",onClick:q},{icon:a(()=>[e(Z,{name:"el-icon-Plus"})]),default:a(()=>[t[11]||(t[11]=f(" 新增 "))]),_:1})),[[C,["resource.tenant_resource/add"]]]),w((i(),p(_,{disabled:!l(k).length,onClick:t[6]||(t[6]=o=>T(l(k)))},{default:a(()=>t[12]||(t[12]=[f(" 删除 ")])),_:1},8,["disabled"])),[[C,["resource.tenant_resource/delete"]]]),P("div",Ce,[e(G,{data:l(v).lists,onSelectionChange:N},{default:a(()=>[e(n,{type:"selection",width:"55"}),e(n,{label:"资源编号",prop:"uid","show-overflow-tooltip":""}),e(n,{label:"资源分类",prop:"category.title","show-overflow-tooltip":""}),e(n,{label:"资源名称",prop:"title","show-overflow-tooltip":""}),e(n,{label:"上架状态",prop:"is_show"},{default:a(({row:o})=>[e(E,{options:l(u).show_status,value:o.is_show},null,8,["options","value"])]),_:1}),e(n,{label:"分类封面",prop:"image"},{default:a(({row:o})=>[e(z,{style:{width:"50px",height:"50px"},src:o.image},null,8,["src"])]),_:1}),e(n,{label:"资源作者",prop:"author","show-overflow-tooltip":""}),e(n,{label:"付费状态",prop:"free_state"},{default:a(({row:o})=>[e(E,{options:l(u).price_typ,value:o.free_state},null,8,["options","value"])]),_:1}),e(n,{label:"资源价格",prop:"money","show-overflow-tooltip":""}),e(n,{label:"资源年份",prop:"year"},{default:a(({row:o})=>[e(E,{options:l(u).data_year,value:o.year},null,8,["options","value"])]),_:1}),e(n,{label:"显示权重",prop:"sort","show-overflow-tooltip":""}),e(n,{label:"创建时间",prop:"create_time","show-overflow-tooltip":""}),e(n,{label:"更新时间",prop:"update_time","show-overflow-tooltip":""}),e(n,{label:"操作",width:"120",fixed:"right"},{default:a(({row:o})=>[w((i(),p(_,{type:"primary",link:"",onClick:m=>M(o)},{default:a(()=>t[13]||(t[13]=[f(" 编辑 ")])),_:2},1032,["onClick"])),[[C,["resource.tenant_resource/edit"]]]),w((i(),p(_,{type:"danger",link:"",onClick:m=>T(o.id)},{default:a(()=>t[14]||(t[14]=[f(" 删除 ")])),_:2},1032,["onClick"])),[[C,["resource.tenant_resource/delete"]]])]),_:1})]),_:1},8,["data"])]),P("div",Ve,[e(H,{modelValue:l(v),"onUpdate:modelValue":t[7]||(t[7]=o=>ge(v)?v.value=o:null),onChange:l(h)},null,8,["modelValue","onChange"])])]),_:1})),[[J,l(v).loading]]),l(g)?(i(),p(_e,{key:0,ref_key:"editRef",ref:y,"dict-data":l(u),onSuccess:l(h),onClose:t[8]||(t[8]=o=>g.value=!1)},null,8,["dict-data","onSuccess"])):he("",!0)])}}});export{Ct as default};
