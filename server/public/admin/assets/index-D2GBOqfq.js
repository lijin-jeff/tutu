import{B as se,C as re,O as pe,P as me,h as de,D as ue,I as _e,K as fe,v as ve,L as ce,Q as be,M as we}from"./element-plus-BOMqSMu4.js";import{_ as ge}from"./index.vue_vue_type_script_setup_true_lang-Dl0F3zG-.js";import{_ as xe}from"./index.vue_vue_type_script_setup_true_lang-uC_cZYzY.js";import{f as S,b as ye}from"./index-D26yx8rh.js";import{_ as he}from"./index.vue_vue_type_script_setup_true_lang-D_WE2sRz.js";import{_ as Ce,a as ke,b as Ve,c as Ee}from"./edit.vue_vue_type_script_setup_true_name_tenantExamExaminationEdit_lang-7CanRDcC.js";import{a as Te}from"./tenant_exam_paper-BDkOQMp_.js";import{a as De}from"./useDictOptions-Dk9jd2iD.js";import{u as A}from"./usePaging-CAPwGkdi.js";import{d as G,s as Pe,r as g,Z as K,aq as Le,o as s,c as U,V as e,M as o,u as a,U as B,aa as I,L as r,S as d,O as b,a as E,i as Z,R as Se,n as z}from"./@vue-DWQ9eUI2.js";import"./lodash-es-ConpBW6D.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-t6vcCXyq.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-kfoHscKg.js";import"./pinia-xIQONLba.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-BGJqEudt.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-BEPSbOJo.js";import"./@highlightjs-DFNU4Zg1.js";import"./index.vue_vue_type_style_index_0_lang-Bn866MxG.js";import"./@wangeditor-CpBL_vJJ.js";import"./picker-O3j_gyx7.js";import"./index-Bn47pySz.js";import"./index-B5Tv3py5.js";import"./index-CUctT6tT.js";import"./index-VlRnd21E.js";import"./index.vue_vue_type_script_setup_true_lang-B5Pc4JQX.js";import"./vue3-video-play-BBayeKOM.js";import"./vuedraggable-BDQ0t2m8.js";import"./vue-CvVLHxBQ.js";import"./sortablejs-DdgKbxid.js";const Ue={class:"mt-4"},$e={class:"flex mt-4 justify-end"},Fe={class:"mt-4"},Be={class:"mt-4"},Ie={class:"flex mt-4 justify-end"},Re=G({name:"tenantExamExaminationLists"}),Bt=G({...Re,setup(Ne){const T=Pe(),D=g(!1),p=K({title:"",is_show:"",admin_id:"",tenant_id:"",start_time:"",end_time:"",privilege:"",exam_time:"",exam_submit_type:"",login_style:""}),x=g(!1),y=g([]),_=K({title:"",is_show:"",is_rand:""}),R=g(0),H=g({}),f=A({fetchFun:Te,params:_}),J=async i=>{await f.getLists(),R.value=i.id,x.value=!0,H.value=i},W=i=>{y.value=i.map(({id:t})=>t),y.value.length>1&&(S.msgError("只能选择一个试卷"),y.value=[])},X=()=>{if(y.value.length>1){S.msgError("只能选择一个试卷");return}ke({id:R.value,paper_id:y.value[0]}).then(i=>{S.msgSuccess("绑定成功"),x.value=!1})},$=g([]),Y=i=>{$.value=i.map(({id:t})=>t)},{dictData:u}=De("show_status,exam_privilege,exam_login_style,exam_submit_type,paper_rand"),{pager:h,getLists:P,resetParams:ee,resetPage:te}=A({fetchFun:Ve,params:p}),le=async()=>{var i;D.value=!0,await z(),(i=T.value)==null||i.open("add")},ae=async i=>{var t,C;D.value=!0,await z(),(t=T.value)==null||t.open("edit"),(C=T.value)==null||C.setFormData(i)},N=async i=>{await S.confirm("确定要删除？"),await Ee({id:i}),P()};return P(),(i,t)=>{const C=se,v=re,oe=he,w=pe,F=me,m=de,O=ue,L=_e,ne=ye,n=fe,j=ve,k=xe,q=ce,M=ge,ie=be,V=Le("perms"),Q=we;return s(),U("div",null,[e(L,{class:"!border-none mb-4",shadow:"never"},{default:o(()=>[e(O,{class:"mb-[-16px]",model:a(p),inline:""},{default:o(()=>[e(v,{label:"考试名称",prop:"title"},{default:o(()=>[e(C,{style:{width:"150px"},modelValue:a(p).title,"onUpdate:modelValue":t[0]||(t[0]=l=>a(p).title=l),clearable:"",placeholder:"请输入考试名称"},null,8,["modelValue"])]),_:1}),e(v,{label:"考试时间"},{default:o(()=>[e(oe,{startTime:a(p).start_time,"onUpdate:startTime":t[1]||(t[1]=l=>a(p).start_time=l),endTime:a(p).end_time,"onUpdate:endTime":t[2]||(t[2]=l=>a(p).end_time=l)},null,8,["startTime","endTime"])]),_:1}),e(v,{label:"考试权限",prop:"privilege"},{default:o(()=>[e(F,{style:{width:"100px"},modelValue:a(p).privilege,"onUpdate:modelValue":t[3]||(t[3]=l=>a(p).privilege=l),clearable:"",placeholder:"请选择考试权限"},{default:o(()=>[e(w,{label:"全部",value:""}),(s(!0),U(B,null,I(a(u).exam_privilege,(l,c)=>(s(),r(w,{key:c,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:o(()=>[e(m,{type:"primary",onClick:a(te)},{default:o(()=>t[12]||(t[12]=[d("查询")])),_:1},8,["onClick"]),e(m,{onClick:a(ee)},{default:o(()=>t[13]||(t[13]=[d("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),b((s(),r(L,{class:"!border-none",shadow:"never"},{default:o(()=>[b((s(),r(m,{type:"primary",onClick:le},{icon:o(()=>[e(ne,{name:"el-icon-Plus"})]),default:o(()=>[t[14]||(t[14]=d(" 新增 "))]),_:1})),[[V,["exam.tenant_exam_examination/add"]]]),b((s(),r(m,{disabled:!a($).length,onClick:t[4]||(t[4]=l=>N(a($)))},{default:o(()=>t[15]||(t[15]=[d(" 删除 ")])),_:1},8,["disabled"])),[[V,["exam.tenant_exam_examination/delete"]]]),E("div",Ue,[e(q,{data:a(h).lists,onSelectionChange:Y},{default:o(()=>[e(n,{type:"selection",width:"55"}),e(n,{label:"考试名称",prop:"title","show-overflow-tooltip":""}),e(n,{label:"考试封面",prop:"image"},{default:o(({row:l})=>[e(j,{style:{width:"50px",height:"50px"},src:l.image},null,8,["src"])]),_:1}),e(n,{label:"开始时间",prop:"start_time","show-overflow-tooltip":""}),e(n,{label:"结束时间",prop:"end_time","show-overflow-tooltip":""}),e(n,{label:"考试权限",prop:"privilege"},{default:o(({row:l})=>[e(k,{options:a(u).exam_privilege,value:l.privilege},null,8,["options","value"])]),_:1}),e(n,{label:"答题类型",prop:"submit_count_type","show-overflow-tooltip":""},{default:o(({row:l})=>[e(k,{options:a(u).exam_submit_type,value:l.exam_submit_type},null,8,["options","value"])]),_:1}),e(n,{label:"登录方式",prop:"login_style"},{default:o(({row:l})=>[e(k,{options:a(u).exam_login_style,value:l.login_style},null,8,["options","value"])]),_:1}),e(n,{label:"绑定试卷",prop:"paper.title","show-overflow-tooltip":""}),e(n,{label:"创建时间",prop:"create_time","show-overflow-tooltip":""}),e(n,{label:"操作",width:"200",fixed:"right"},{default:o(({row:l})=>[b((s(),r(m,{type:"primary",link:"",onClick:c=>ae(l)},{default:o(()=>t[16]||(t[16]=[d(" 编辑 ")])),_:2},1032,["onClick"])),[[V,["exam.tenant_exam_examination/edit"]]]),b((s(),r(m,{type:"primary",link:"",onClick:c=>J(l)},{default:o(()=>t[17]||(t[17]=[d(" 试卷 ")])),_:2},1032,["onClick"])),[[V,["exam.tenant_exam_examination/edit"]]]),b((s(),r(m,{type:"danger",link:"",onClick:c=>N(l.id)},{default:o(()=>t[18]||(t[18]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[V,["exam.tenant_exam_examination/delete"]]])]),_:1})]),_:1},8,["data"])]),E("div",$e,[e(M,{modelValue:a(h),"onUpdate:modelValue":t[5]||(t[5]=l=>Z(h)?h.value=l:null),onChange:a(P)},null,8,["modelValue","onChange"])])]),_:1})),[[Q,a(h).loading]]),a(D)?(s(),r(Ce,{key:0,ref_key:"editRef",ref:T,"dict-data":a(u),onSuccess:a(P),onClose:t[6]||(t[6]=l=>D.value=!1)},null,8,["dict-data","onSuccess"])):Se("",!0),e(ie,{title:"试卷选择",modelValue:a(x),"onUpdate:modelValue":t[11]||(t[11]=l=>Z(x)?x.value=l:null),width:"80%"},{default:o(()=>[E("div",Fe,[e(L,{class:"!border-none",shadow:"never","body-style":{padding:"10px"}},{default:o(()=>[e(O,{class:"mb-[-16px]",model:a(_),inline:""},{default:o(()=>[e(v,{label:"试卷名称",prop:"title"},{default:o(()=>[e(C,{class:"w-[280px]",modelValue:a(_).title,"onUpdate:modelValue":t[7]||(t[7]=l=>a(_).title=l),clearable:"",placeholder:"请输入试卷名称"},null,8,["modelValue"])]),_:1}),e(v,{label:"启用状态",prop:"is_show"},{default:o(()=>[e(F,{class:"w-[280px]",style:{width:"100px"},modelValue:a(_).is_show,"onUpdate:modelValue":t[8]||(t[8]=l=>a(_).is_show=l),clearable:"",placeholder:"请选择启用状态"},{default:o(()=>[e(w,{label:"全部",value:""}),(s(!0),U(B,null,I(a(u).show_status,(l,c)=>(s(),r(w,{key:c,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"随机状态",prop:"is_rand"},{default:o(()=>[e(F,{class:"w-[280px]",style:{width:"100px"},modelValue:a(_).is_rand,"onUpdate:modelValue":t[9]||(t[9]=l=>a(_).is_rand=l),clearable:"",placeholder:"请选择随机状态"},{default:o(()=>[e(w,{label:"全部",value:""}),(s(!0),U(B,null,I(a(u).paper_rand,(l,c)=>(s(),r(w,{key:c,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:o(()=>[e(m,{type:"primary",onClick:a(f).resetPage},{default:o(()=>t[19]||(t[19]=[d("查询")])),_:1},8,["onClick"]),e(m,{onClick:a(f).resetParams},{default:o(()=>t[20]||(t[20]=[d("重置")])),_:1},8,["onClick"]),e(m,{type:"warning",onClick:X},{default:o(()=>t[21]||(t[21]=[d("确认")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),b((s(),r(L,{class:"!border-none",shadow:"never"},{default:o(()=>[E("div",Be,[e(q,{data:a(f).pager.lists,onSelectionChange:W},{default:o(()=>[e(n,{type:"selection",width:"55"}),e(n,{label:"试卷ID",prop:"id","show-overflow-tooltip":""}),e(n,{label:"试卷编号",prop:"uid","show-overflow-tooltip":""}),e(n,{label:"试卷封面",prop:"image"},{default:o(({row:l})=>[e(j,{style:{width:"50px",height:"50px"},src:l.image},null,8,["src"])]),_:1}),e(n,{label:"试卷名称",prop:"title","show-overflow-tooltip":""}),e(n,{label:"随机状态",prop:"is_rand"},{default:o(({row:l})=>[e(k,{options:a(u).paper_rand,value:l.is_rand},null,8,["options","value"])]),_:1}),e(n,{label:"试题总数",prop:"option_count","show-overflow-tooltip":""}),e(n,{label:"试题总分",prop:"option_score","show-overflow-tooltip":""}),e(n,{label:"启用状态",prop:"is_show"},{default:o(({row:l})=>[e(k,{options:a(u).show_status,value:l.is_show},null,8,["options","value"])]),_:1}),e(n,{label:"显示权重",prop:"sort","show-overflow-tooltip":""}),e(n,{label:"创建时间",prop:"create_time","show-overflow-tooltip":""}),e(n,{label:"更新时间",prop:"update_time","show-overflow-tooltip":""})]),_:1},8,["data"])]),E("div",Ie,[e(M,{modelValue:a(f).pager,"onUpdate:modelValue":t[10]||(t[10]=l=>a(f).pager=l),onChange:a(f).getLists},null,8,["modelValue","onChange"])])]),_:1})),[[Q,a(f).pager.loading]])])]),_:1},8,["modelValue"])])}}});export{Bt as default};
