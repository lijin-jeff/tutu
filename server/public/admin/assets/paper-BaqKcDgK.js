import{c as ge,N as ve,I as ye,B as be,$ as he,h as xe,a0 as we,C as Ce,a1 as Ve,O as ke,P as Ee,D as Le,K as Te,v as De,L as Ue,Q as Ie,g as Pe,d as je,a3 as Be,a4 as Se}from"./element-plus-BOMqSMu4.js";import{_ as Me}from"./index.vue_vue_type_script_setup_true_lang-Dl0F3zG-.js";import{_ as Oe}from"./index.vue_vue_type_script_setup_true_lang-uC_cZYzY.js";import{a as $e}from"./useDictOptions-Dk9jd2iD.js";import{u as Fe}from"./usePaging-CAPwGkdi.js";import{a as He}from"./tenant_exam_library-BP0tXR3G.js";import{g as Ne}from"./exam_category-D_x0uykD.js";import{a as ze}from"./tenant_exam_question-B2Ksr1j0.js";import{f as Re,g as qe}from"./tenant_exam_paper-BDkOQMp_.js";import{u as Qe,a as Ae}from"./vue-router-kfoHscKg.js";import{f as Ke,d as Ze}from"./index-D26yx8rh.js";import{d as Ge,r as N,Z as I,ag as B,o as d,c as _,V as t,M as s,a as l,U as b,aa as w,u as n,L as C,T as h,R as z,S as E,i as R,P as Je}from"./@vue-DWQ9eUI2.js";import"./lodash-es-ConpBW6D.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-t6vcCXyq.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./nprogress-Cgf5DU8x.js";import"./pinia-xIQONLba.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-BGJqEudt.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-BEPSbOJo.js";import"./@highlightjs-DFNU4Zg1.js";const We={class:"exam-container"},Xe={class:"card-header"},Ye={class:"left-main"},et={class:"left-main-left"},tt={style:{display:"flex","justify-content":"flex-start"}},lt={class:"padding-right10"},at={class:"font-setting"},ot={class:"font-setting"},st={class:"left-main-left-score"},nt={style:{display:"flex","align-items":"center"}},it={class:"padding-right10"},rt={style:{display:"flex","justify-content":"flex-start"},class:"margin-bottom20"},dt={class:"margin-left10 font-setting"},pt={style:{display:"flex","justify-content":"flex-start"}},mt={class:"margin-left10 font-setting"},ut={style:{display:"flex","justify-content":"space-between","margin-bottom":"20px"}},_t={style:{display:"flex","justify-content":"flex-start","align-items":"center"}},ct={class:"margin-left10"},ft={class:"margin-left10"},gt={class:"display-flex-between-center margin-bottom20"},vt={class:"display-flex-start-center exam-title"},yt=["innerHTML"],bt={class:"margin-right10 display-flex-right-center"},ht={class:"padding-right20"},xt=["onClick"],wt={class:"padding-right20"},Ct={class:"padding-right20"},Vt={class:"margin-bottom20"},kt={class:"exam-option-item margin-top20"},Et=["innerHTML"],Lt={class:"exam-answer"},Tt=["innerHTML"],Dt={class:"mt-4"},Ut={class:"flex mt-4 justify-end"},It=Ge({__name:"paper",setup(Pt){const L=N(!1),S=Qe(),q=Ae();I({exam_type:""});const i=I({data:[],exam_list:[],total:{}});(async()=>{Re({id:S.query.id}).then(o=>{Object.assign(i,[]),Object.assign(i,o)})})();const Q=()=>{qe(Object.assign(i,{id:S.query.id})).then(o=>{Ke.msgSuccess("保存成功"),q.back()})},A=o=>{i.exam_list.splice(o,1),P()},K=(o,e)=>{console.log(e,o),P()},Z=(o,e)=>{i.exam_list.forEach((g,u)=>{(parseInt(g.exam_type)===1&&o===0||parseInt(g.exam_type)===2&&o===1||parseInt(g.exam_type)===3&&o===2)&&(i.exam_list[u].score=parseFloat(e))}),P()},P=()=>{let o=0,e=0,g=0,u=0,k=0,T=0,v=0;i.exam_list.forEach(c=>{v+=c.score,parseInt(c.exam_type)===1?(g+=c.score,u+=1):parseInt(c.exam_type)===2?(e+=c.score,k+=1):parseInt(c.exam_type)===3&&(o+=c.score,T+=1)}),i.data[0].total_score=g,i.data[1].total_score=e,i.data[2].total_score=o,i.data[0].total_number=u,i.data[1].total_number=k,i.data[2].total_number=T,i.total.exam_score=v,i.total.exam_count=u+k+T},G=o=>{if(o<=0)return;const e=[...i.exam_list];[e[o-1],e[o]]=[e[o],e[o-1]],i.exam_list=e},J=o=>{if(o>=i.exam_list.length-1)return;const e=[...i.exam_list];[e[o],e[o+1]]=[e[o+1],e[o]],i.exam_list=e},p=I({title:"",is_show:"",category_uid:"",author:"",free_state:"",year:"",hot_state:"",recommend_state:""}),M=N([]),O=I([]),W=o=>{M.value=o.map(({id:e})=>e)},X=o=>{p.category_uid=o[1]},Y=async()=>{const o=ge.service({lock:!0,text:"试题努力加载中",background:"rgba(0, 0, 0, 0.7)"});await ze({id:M.value}).then(e=>{Object.assign(i,[]),Object.assign(i,e),L.value=!1,o.close()})},{dictData:V}=$e("show_status,price_typ,data_year,hot_state,recommend_state"),{pager:D,getLists:$,resetParams:ee,resetPage:te}=Fe({fetchFun:He,params:p}),le=async()=>{await Ne().then(o=>{Object.assign(O,o)})},ae=async()=>{await $(),await le(),L.value=!0};return(o,e)=>{const g=ve,u=ye,k=be,T=he,v=xe,c=Pe,oe=B("Delete"),j=je,se=B("Top"),ne=B("Bottom"),F=Be,ie=Se,re=we,x=Ce,de=Ve,y=ke,U=Ee,pe=Le,f=Te,me=De,H=Oe,ue=Ue,_e=Me,ce=Ie;return d(),_(b,null,[t(u,{class:"!border-none margin-bottom20",shadow:"never"},{default:s(()=>[t(g,{content:"试卷管理",onBack:e[0]||(e[0]=a=>o.$router.back())})]),_:1}),l("div",We,[t(T,{width:"300px",class:"exam-aside"},{default:s(()=>[(d(!0),_(b,null,w(n(i).data,(a,r)=>(d(),C(u,{style:{width:"100%"},class:"margin-bottom10","body-style":{padding:"10px"},key:r},{header:s(()=>[l("div",Xe,[l("span",null,h(a.exam_type),1)])]),default:s(()=>[l("div",Ye,[l("div",et,[l("div",tt,[l("div",lt,[e[9]||(e[9]=l("span",null,"共",-1)),l("span",at,h(a.total_number),1),e[10]||(e[10]=l("span",null,"道",-1))]),l("div",null,[e[11]||(e[11]=l("span",null,"共",-1)),l("span",ot,h(a.total_score),1),e[12]||(e[12]=l("span",null,"分",-1))])]),l("div",st,[l("div",nt,[e[13]||(e[13]=l("div",{class:"padding-right10"},"每题分数",-1)),l("div",it,[t(k,{modelValue:a.score,"onUpdate:modelValue":m=>a.score=m,min:1,step:1,onChange:m=>Z(r,m),style:{width:"50px",height:"25px"}},null,8,["modelValue","onUpdate:modelValue","onChange"])]),e[14]||(e[14]=l("div",null,"分",-1))])])])])]),_:2},1024))),128)),n(i).data.length>0?(d(),C(u,{key:0,style:{"max-width":"300px"},class:"margin-top10"},{default:s(()=>[l("div",rt,[e[15]||(e[15]=l("div",null,"总题数",-1)),l("div",dt,h(n(i).total.exam_count),1),e[16]||(e[16]=l("div",{class:"margin-left10"},"道",-1))]),l("div",pt,[e[17]||(e[17]=l("div",null,"总分数",-1)),l("div",mt,h(n(i).total.exam_score),1),e[18]||(e[18]=l("div",{class:"margin-left10"},"分",-1))])]),_:1})):z("",!0)]),_:1}),t(re,{class:"exam-main"},{default:s(()=>[t(u,{style:{width:"100%"},shadow:"never","body-style":{padding:"20px"}},{default:s(()=>[l("div",ut,[l("div",_t,[l("div",ct,[t(v,{type:"primary",onClick:Q},{default:s(()=>e[19]||(e[19]=[E("保存试卷")])),_:1})]),l("div",ft,[t(v,{type:"primary",onClick:ae},{default:s(()=>e[20]||(e[20]=[E("选择题库试题")])),_:1})])])]),l("div",null,[(d(!0),_(b,null,w(n(i).exam_list,(a,r)=>(d(),_("div",{key:r},[l("div",gt,[l("div",vt,[l("div",null,h(r+1)+"、["+h(a.exam_type_text)+"]",1),l("div",{innerHTML:a.title},null,8,yt)]),l("div",bt,[l("div",ht,[e[21]||(e[21]=E(" 分数: ")),t(c,{step:.01,min:1,max:10,style:{width:"150px"},modelValue:n(i).exam_list[r].score,"onUpdate:modelValue":m=>n(i).exam_list[r].score=m,placeholder:"请输入分数",clearable:"",onChange:m=>K(r,m)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),l("div",{class:"padding-right20",onClick:m=>A(r)},[t(j,{size:15},{default:s(()=>[t(oe)]),_:1})],8,xt),l("div",wt,[t(j,{size:15,onClick:m=>G(r)},{default:s(()=>[t(se)]),_:2},1032,["onClick"])]),l("div",Ct,[t(j,{size:15,onClick:m=>J(r)},{default:s(()=>[t(ne)]),_:2},1032,["onClick"])])])]),l("div",Vt,[(d(!0),_(b,null,w(a.option,(m,fe)=>(d(),_("div",{key:fe},[l("div",kt,[t(F,{span:"0.5"},{default:s(()=>[l("div",{class:Je(m.is_check?"exam-option-selected":"exam-option")},h(m.check),3)]),_:2},1024),t(F,{span:23},{default:s(()=>[l("div",{innerHTML:m.title,class:"margin-left10"},null,8,Et)]),_:2},1024)])]))),128))]),l("div",Lt,[e[22]||(e[22]=l("div",null,"试题解析：",-1)),l("div",{innerHTML:a.analysis},null,8,Tt)]),t(ie)]))),128))])]),_:1})]),_:1}),t(ce,{title:"题库选择",modelValue:n(L),"onUpdate:modelValue":e[8]||(e[8]=a=>R(L)?L.value=a:null),width:"80%"},{default:s(()=>[l("div",Dt,[t(u,{class:"!border-none mb-4",shadow:"never","body-style":{padding:"10px"}},{default:s(()=>[t(pe,{class:"",model:n(p),inline:""},{default:s(()=>[t(x,{label:"题库名称",prop:"title"},{default:s(()=>[t(k,{class:"w-[120px]",modelValue:n(p).title,"onUpdate:modelValue":e[1]||(e[1]=a=>n(p).title=a),clearable:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),t(x,{label:"题库分类",prop:"category_uid"},{default:s(()=>[t(de,{modelValue:n(p).category_uid,"onUpdate:modelValue":e[2]||(e[2]=a=>n(p).category_uid=a),options:n(O),props:o.props,style:{width:"100%"},onChange:X},null,8,["modelValue","options","props"])]),_:1}),t(x,{label:"收费状态",prop:"free_state"},{default:s(()=>[t(U,{style:{width:"100px"},modelValue:n(p).free_state,"onUpdate:modelValue":e[3]||(e[3]=a=>n(p).free_state=a),clearable:"",placeholder:"请选择"},{default:s(()=>[t(y,{label:"全部",value:""}),(d(!0),_(b,null,w(n(V).price_typ,(a,r)=>(d(),C(y,{key:r,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"是否热门",prop:"hot_state"},{default:s(()=>[t(U,{style:{width:"100px"},modelValue:n(p).hot_state,"onUpdate:modelValue":e[4]||(e[4]=a=>n(p).hot_state=a),clearable:"",placeholder:"请选择"},{default:s(()=>[t(y,{label:"全部",value:""}),(d(!0),_(b,null,w(n(V).hot_state,(a,r)=>(d(),C(y,{key:r,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"是否推荐",prop:"recommend_state"},{default:s(()=>[t(U,{style:{width:"100px"},modelValue:n(p).recommend_state,"onUpdate:modelValue":e[5]||(e[5]=a=>n(p).recommend_state=a),clearable:"",placeholder:"请选择"},{default:s(()=>[t(y,{label:"全部",value:""}),(d(!0),_(b,null,w(n(V).recommend_state,(a,r)=>(d(),C(y,{key:r,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"收费状态",prop:"free_state"},{default:s(()=>[t(U,{style:{width:"100px"},modelValue:n(p).free_state,"onUpdate:modelValue":e[6]||(e[6]=a=>n(p).free_state=a),clearable:"",placeholder:"请选择"},{default:s(()=>[t(y,{label:"全部",value:""}),(d(!0),_(b,null,w(n(V).price_typ,(a,r)=>(d(),C(y,{key:r,label:a.name,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(x,null,{default:s(()=>[t(v,{type:"primary",onClick:n(te)},{default:s(()=>e[23]||(e[23]=[E("查询")])),_:1},8,["onClick"]),t(v,{onClick:n(ee)},{default:s(()=>e[24]||(e[24]=[E("重置")])),_:1},8,["onClick"]),t(v,{onClick:Y,type:"warning"},{default:s(()=>e[25]||(e[25]=[E("确认选择")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(ue,{data:n(D).lists,onSelectionChange:W},{default:s(()=>[t(f,{type:"selection",width:"55"}),t(f,{label:"题库编号",prop:"uid","show-overflow-tooltip":""}),t(f,{label:"题库分类",prop:"category.title"}),t(f,{label:"题库名称",prop:"title","show-overflow-tooltip":""}),t(f,{label:"试题总数",prop:"exam_count","show-overflow-tooltip":""}),t(f,{label:"题库封面",prop:"cover"},{default:s(({row:a})=>[a.image!==""?(d(),C(me,{key:0,style:{width:"50px",height:"50px"},src:a.image,"preview-src-list":[a.image],"preview-teleported":""},null,8,["src","preview-src-list"])):z("",!0)]),_:1}),t(f,{label:"收费状态",prop:"free_state"},{default:s(({row:a})=>[t(H,{options:n(V).price_typ,value:a.free_state},null,8,["options","value"])]),_:1}),t(f,{label:"显示状态",prop:"is_show"},{default:s(({row:a})=>[t(H,{options:n(V).show_status,value:a.is_show},null,8,["options","value"])]),_:1}),t(f,{label:"创建时间",prop:"create_time","show-overflow-tooltip":""})]),_:1},8,["data"])]),l("div",Ut,[t(_e,{modelValue:n(D),"onUpdate:modelValue":e[7]||(e[7]=a=>R(D)?D.value=a:null),onChange:n($)},null,8,["modelValue","onChange"])])]),_:1},8,["modelValue"])])],64)}}}),bl=Ze(It,[["__scopeId","data-v-c538d0e0"]]);export{bl as default};
