import{B as A,C as K,h as O,D as Z,I as z,K as G,v as H,L as J,M as Q}from"./element-plus-BOMqSMu4.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-Dl0F3zG-.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-uC_cZYzY.js";import{f as Y,b as ee}from"./index-D26yx8rh.js";import{e as te,f as ae}from"./exam_category-D_x0uykD.js";import{a as oe}from"./useDictOptions-Dk9jd2iD.js";import{u as le}from"./usePaging-CAPwGkdi.js";import{_ as se}from"./edit.vue_vue_type_script_setup_true_name_examCategoryEdit_lang-DY6EoCib.js";import{d as $,s as ne,r as k,Z as ie,aq as re,o as n,c as de,V as t,M as a,u as o,S as m,O as p,L as i,a as E,R as V,i as me,n as D}from"./@vue-DWQ9eUI2.js";const ce={class:"mt-4"},pe={class:"flex mt-4 justify-end"},_e=$({name:"examCategoryLists"}),ke=$({..._e,setup(ue){const _=ne(),u=k(!1),f=ie({title:"",is_show:"",is_recommend:""}),x=k([]),B=s=>{x.value=s.map(({id:e})=>e)},{dictData:C}=oe("show_status,is_recommend"),{pager:c,getLists:v,resetParams:L,resetPage:P}=le({fetchFun:te,params:f}),R=async()=>{var s;u.value=!0,await D(),(s=_.value)==null||s.open("add")},S=async s=>{var e,g;u.value=!0,await D(),(e=_.value)==null||e.open("edit"),(g=_.value)==null||g.setFormData(s)},b=async s=>{await Y.confirm("确定要删除？"),await ae({id:s}),v()};return v(),(s,e)=>{const g=A,w=K,r=O,F=Z,h=z,I=ee,d=G,N=H,T=X,q=J,M=W,y=re("perms"),U=Q;return n(),de("div",null,[t(h,{class:"!border-none mb-4",shadow:"never","body-style":{padding:"10px"}},{default:a(()=>[t(F,{class:"mb-[-16px]",model:o(f),inline:""},{default:a(()=>[t(w,{label:"分类名称",prop:"title"},{default:a(()=>[t(g,{class:"w-[120px]",modelValue:o(f).title,"onUpdate:modelValue":e[0]||(e[0]=l=>o(f).title=l),clearable:"",placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),t(w,null,{default:a(()=>[t(r,{type:"primary",onClick:o(P)},{default:a(()=>e[4]||(e[4]=[m("查询")])),_:1},8,["onClick"]),t(r,{onClick:o(L)},{default:a(()=>e[5]||(e[5]=[m("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),p((n(),i(h,{class:"!border-none",shadow:"never"},{default:a(()=>[p((n(),i(r,{type:"primary",onClick:R},{icon:a(()=>[t(I,{name:"el-icon-Plus"})]),default:a(()=>[e[6]||(e[6]=m(" 新增 "))]),_:1})),[[y,["exam.exam_category/add"]]]),p((n(),i(r,{disabled:!o(x).length,onClick:e[1]||(e[1]=l=>b(o(x)))},{default:a(()=>e[7]||(e[7]=[m(" 删除 ")])),_:1},8,["disabled"])),[[y,["exam.exam_category/delete"]]]),E("div",ce,[t(q,{data:o(c).lists,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",onSelectionChange:B,"default-expand-all":!1,"tree-props":{children:"children",hasChildren:"hasChildren"},"cell-style":{"text-align":"center"},"header-cell-style":{"text-align":"center"}},{default:a(()=>[t(d,{type:"selection",width:"55"}),t(d,{prop:"title",label:"分类名称"}),t(d,{label:"分类图片",prop:"cover"},{default:a(({row:l})=>[l.cover!==""?(n(),i(N,{key:0,style:{width:"50px",height:"50px"},src:l.cover,"preview-src-list":[l.cover],"preview-teleported":""},null,8,["src","preview-src-list"])):V("",!0)]),_:1}),t(d,{prop:"is_show",label:"题库数量"}),t(d,{label:"启用状态",prop:"is_show"},{default:a(({row:l})=>[t(T,{options:o(C).show_status,value:l.is_show},null,8,["options","value"])]),_:1}),t(d,{label:"操作",width:"120",fixed:"right"},{default:a(({row:l})=>[p((n(),i(r,{type:"primary",link:"",onClick:j=>S(l)},{default:a(()=>e[8]||(e[8]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[y,["exam.exam_category/edit"]]]),p((n(),i(r,{type:"danger",link:"",onClick:j=>b(l.id)},{default:a(()=>e[9]||(e[9]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[y,["exam.exam_category/delete"]]])]),_:1})]),_:1},8,["data"])]),E("div",pe,[t(M,{modelValue:o(c),"onUpdate:modelValue":e[2]||(e[2]=l=>me(c)?c.value=l:null),onChange:o(v)},null,8,["modelValue","onChange"])])]),_:1})),[[U,o(c).loading]]),o(u)?(n(),i(se,{key:0,ref_key:"editRef",ref:_,"dict-data":o(C),onSuccess:o(v),onClose:e[3]||(e[3]=l=>u.value=!1)},null,8,["dict-data","onSuccess"])):V("",!0)])}}});export{ke as _};
